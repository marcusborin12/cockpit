<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crefisa Automation Hub</title>
    <meta name="description" content="Plataforma de Automação e Orquestração Crefisa" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>

  <body>
    <!-- Interceptador de erros de extensões antes da aplicação carregar -->
    <script>
      // Intercepta erros de extensões do navegador ANTES da aplicação React carregar
      const originalConsoleError = console.error;
      console.error = function(...args) {
        const message = args.join(' ');
        
        // Lista de padrões de erro para suprimir
        const suppressPatterns = [
          /Unchecked runtime\.lastError/i,
          /listener indicated an asynchronous response by returning true/i,
          /message channel closed before a response was received/i,
          /runtime\.lastError/i,
          /Extension context invalidated/i,
          /chrome-extension:/i,
          /moz-extension:/i
        ];
        
        // Se o erro corresponde a algum padrão, não exibe
        const shouldSuppress = suppressPatterns.some(pattern => pattern.test(message));
        if (!shouldSuppress) {
          originalConsoleError.apply(console, args);
        }
      };
    </script>
    
    <!-- Configuração runtime para desenvolvimento e produção -->
    <script>
      // Define configuração padrão vazia
      window.__RUNTIME_CONFIG__ = {};
      
      // Tenta carregar runtime-config.js apenas se estivermos em produção
      // (detecta se não é localhost/desenvolvimento)
      if (!window.location.hostname.includes('localhost') && !window.location.hostname.includes('127.0.0.1')) {
        const script = document.createElement('script');
        script.src = '/runtime-config.js';
        script.onerror = () => {
          console.log('ℹ️ Runtime config not found - using defaults');
        };
        document.head.appendChild(script);
      }
    </script>
    
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
